# README УСТРЕЛ

## Описание
Это клиент-серверное приложение, где клиент написан на C++ с использованием фреймворка Qt, а серверная часть реализована с использованием FastAPI, Python и базы данных SQLite. Клиентское приложение позволяет регистрировать и логинить пользователей, взаимодействуя с сервером, который работает в Docker контейнере.

### Стек технологий:
- **Клиент:** Qt (C++)
- **Сервер:** FastAPI (Python), SQLite
- **Контейнеризация:** Docker

## Структура проекта
```
.
├── README.md
├── db_client
│   └── DB_client
│       ├── CMakeLists.txt
│       ├── login_form.cpp
│       ├── login_form.h
│       ├── login_form.ui
│       ├── main.cpp
│       ├── mainwindow.cpp
│       ├── mainwindow.h
│       ├── mainwindow.ui
│       ├── registration_form.cpp
│       ├── registration_form.h
│       └── registration_form.ui
└── server_side
    ├── Dockerfile
    ├── app
    │   ├── main.py
    │   ├── requirements.txt
    │   └── sql_service.py
    ├── script.sh
    └── users.db
```

## Установка и запуск

### Шаг 1: Настройка клиентской части (Qt)
1. **Установите Qt:**
   Если у вас ещё нет Qt, скачайте и установите его с официального сайта: [Qt Downloads](https://www.qt.io/download).
   
2. **Соберите клиентское приложение:**
   - Откройте проект в Qt Creator или используйте консоль для сборки проекта.
   - Выполните сборку и убедитесь, что приложение запускается корректно.

### Шаг 2: Настройка серверной части (FastAPI + SQLite)

1. **Убедитесь, что у вас установлен Docker:**  
   Инструкции по установке можно найти здесь: [Docker Installation](https://docs.docker.com/get-docker/).

2. **Измените директорию тома для хранения данных на хосте:**
   В файле `script.sh`, измените путь к директории на вашем компьютере, где будут храниться данные SQLite:
   ```bash
   docker run -d -v /путь/к/вашей/директории:/app/data -p 8000:8000 my_fastapi_app
   ```

3. **Запуск серверной части:**
   Откройте терминал в директории проекта и выполните команду для сборки и запуска контейнера:
   ```bash
   ./script.sh
   ```
   Эта команда:
   - Соберёт Docker образ из `Dockerfile`
   - Запустит сервер FastAPI внутри контейнера с использованием порта 8000
   - Примонтирует директорию для хранения данных SQLite с вашего хоста

4. **Проверка работы сервера:**
   После запуска контейнера сервер будет доступен по адресу:
   ```bash
   http://localhost:8000
   ```

   Вы можете использовать браузер или любой инструмент для тестирования API, например Postman, для отправки запросов на сервер.

### Шаг 3: Взаимодействие между клиентом и сервером

1. **Запуск клиентского приложения:**
   Запустите клиентское приложение, собранное на Qt. Оно будет взаимодействовать с сервером, используя API запросы через FastAPI.

2. **Функционал:**
   - **Регистрация пользователя:** Клиент отправляет данные на сервер для регистрации.
   - **Авторизация пользователя:** Клиент отправляет логин и пароль на сервер для проверки (после регистрации).

## Примечания

- Все данные пользователей (логин, пароль (хэшированный sha256) и другая информация) хранятся в базе данных SQLite, которая находится внутри Docker контейнера, но сохраняется в директории на вашем хосте благодаря механизму Docker Volumes.
- Сервер автоматически открывает порт 8000 для взаимодействия с клиентом. Убедитесь, что этот порт не занят другими приложениями.

## Требования

- Qt 5.x или выше
- Docker
- Python 3.9 (используется внутри контейнера)
- SQLite (используется в контейнере)

## Примеры API-запросов

- **Регистрация пользователя (POST /register)**:
   ```json
   {
       "name": "Andrei",
       "login": "alice3e",
       "password": "hashed_password",
       "email": "user@example.com"
   }
   ```

- **Авторизация пользователя (POST /login)**:
   ```json
   {
       "login": "alice3e",
       "password": "hashed_password"
   }
   ```

